# Moturial Payment Service - Environment Configuration
# Copy this file to .env and configure your environment variables

# ========================================
# DATABASE CONFIGURATION
# ========================================

# Development (H2 in-memory)
DATABASE_URL=jdbc:h2:mem:testdb
DATABASE_USERNAME=sa
DATABASE_PASSWORD=
DATABASE_DRIVER=org.h2.Driver
HIBERNATE_DIALECT=org.hibernate.dialect.H2Dialect

# Production (PostgreSQL)
# DATABASE_URL=jdbc:postgresql://localhost:5432/moturial_payment
# DATABASE_USERNAME=moturial_user
# DATABASE_PASSWORD=your_secure_password_here
# DATABASE_DRIVER=org.postgresql.Driver
# HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect

# Database Pool Configuration
DB_POOL_SIZE=10
DB_POOL_MIN_IDLE=5
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000

# ========================================
# APPLICATION CONFIGURATION
# ========================================

# Spring Profile (dev, prod, test)
SPRING_PROFILES_ACTIVE=dev

# Server Configuration
SERVER_PORT=8080
SERVER_CONTEXT_PATH=/api/v1

# JPA Configuration
JPA_DDL_AUTO=validate
JPA_SHOW_SQL=false

# Flyway Configuration
FLYWAY_ENABLED=true
FLYWAY_BASELINE_ON_MIGRATE=true
FLYWAY_VALIDATE_ON_MIGRATE=true

# H2 Console (development only)
H2_CONSOLE_ENABLED=false

# ========================================
# SECURITY CONFIGURATION
# ========================================

# API Key Authentication
API_KEY=moturial-secret-key-dev-change-in-production

# JWT Configuration
JWT_SECRET=your-256-bit-secret-key-here-change-in-production-must-be-32-chars-minimum
JWT_EXPIRATION=86400000

# Basic Auth (for actuator endpoints)
SECURITY_USER_NAME=admin
SECURITY_USER_PASSWORD=admin123

# ========================================
# CORS CONFIGURATION
# ========================================

CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# ========================================
# STRIPE CONFIGURATION
# ========================================

# Stripe API Keys (use test keys for development)
STRIPE_SECRET_KEY=sk_test_51H1234567890abcdefghijklmnopqrstuvwxyz
STRIPE_PUBLISHABLE_KEY=pk_test_51H1234567890abcdefghijklmnopqrstuvwxyz
STRIPE_WEBHOOK_SECRET=whsec_test_1234567890abcdefghijklmnopqrstuvwxyz
STRIPE_CURRENCY=BRL

# ========================================
# PAYMENT CONFIGURATION
# ========================================

# Payment Limits (values in cents/centavos)
MAX_PAYMENT_AMOUNT=1000000
MIN_PAYMENT_AMOUNT=100
MAX_INSTALLMENTS=12

# Payment Retry Configuration
PAYMENT_RETRY_MAX_ATTEMPTS=3
PAYMENT_RETRY_BACKOFF_DELAY=1000

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Log Levels
LOG_LEVEL=INFO
STRIPE_LOG_LEVEL=WARN
SECURITY_LOG_LEVEL=WARN

# Health Check Configuration
HEALTH_SHOW_DETAILS=never

# ========================================
# PRODUCTION ONLY VARIABLES
# ========================================

# Log File Path (production)
# LOG_FILE_PATH=/var/log/moturial/payment-service.log

# Database Leak Detection (production)
# DB_LEAK_DETECTION=60000

# ========================================
# IMPORTANT SECURITY NOTES
# ========================================

# 1. NEVER commit .env files to version control
# 2. Use strong, unique passwords in production
# 3. Rotate API keys and secrets regularly
# 4. Use environment-specific configurations
# 5. Enable proper monitoring and alerting
# 6. Follow OWASP security guidelines

# ========================================
# ENVIRONMENT SETUP INSTRUCTIONS
# ========================================

# Development:
# 1. Copy this file to .env
# 2. Configure development values
# 3. Use H2 database for local development
# 4. Use Stripe test keys

# Production:
# 1. Set all environment variables in your deployment platform
# 2. Use PostgreSQL database
# 3. Use production Stripe keys
# 4. Enable proper security configurations
# 5. Configure monitoring and logging
